<!DOCTYPE html>
<ui:composition template="/WEB-INF/template/template_aernnova.xhtml"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://xmlns.jcp.org/jsf/core"
xmlns:h="http://xmlns.jcp.org/jsf/html"
xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
xmlns:p="http://primefaces.org/ui">

<f:metadata>
<f:viewAction action="#{tarefaBean.listarTarefas}"></f:viewAction>
<f:viewAction action="#{tarefaBean.cargarResponsavel}"></f:viewAction>
</f:metadata>

<ui:define name="corpo">

<h:form>
<div align="right">

<p:commandButton value="Tarefas Abertas" action="#{tarefaBean.gerarRelatorioTarefasAbertasbyPessoa}" ajax="false" onclick="this.form.target = '_blank'"  />


</div>
</h:form>

<h:form id="frm_all_tarefas">


<div align="left">
<p:panelGrid id="panel" style="text-align:center; width: 500px" >

  <f:facet name="header">
        <p:row>        
            <p:column colspan="2"><div align="left">Pesquisar</div></p:column>
        </p:row>
   </f:facet>
   
  <p:row>
  
    <p:column style="text-align:center">
    <p:outputLabel value="Titulo" /> <br/> 
    <p:inputText value="#{tarefaBean.filtro.titulo}" />
    </p:column>
    
    <p:column>
    <p:outputLabel value="Responsavel" /><br/>
     <p:selectOneMenu  value="#{tarefaBean.filtro.idResponsavel}"  filter="true" filterMatchMode="contains" style="width: 200px" >
	<f:selectItem itemLabel="Seleccione Responsavel" noSelectionOption="true" />
	<f:selectItems value="#{tarefaBean.pessoas}" var="pessoa" itemValue="#{pessoa.id}" itemLabel="#{pessoa.nome}" />
	</p:selectOneMenu>
    </p:column>  
     
  </p:row>

  <p:row>
    <p:column colspan="2" style="text-align:center">Data Creacao</p:column>    
  </p:row>
    <p:row>
    <p:column style="text-align:center"><p:outputLabel value="Date CreaÃ§ao" /> <br/> <p:calendar value="#{tarefaBean.filtro.dateInicio}" pattern="dd/MM/yyyy" showOn="button" /></p:column>
    <p:column></p:column>   
  </p:row>
  <f:facet name="footer">
<p:row>
<p:column colspan="2">
<p:commandButton icon="ui-icon-circle-zoomin" value="Buscar" action="#{tarefaBean.buscarTarefasFilter}" update="table_tarefas" />
<p:commandButton icon="ui-icon-refresh" actionListener="#{tarefaBean.reset}" value="Limpar" process="@this" action="#{tarefaBean.listarTarefas}" update="table_tarefas panel" />
</p:column>
</p:row>
</f:facet>
</p:panelGrid>
</div>
<p/>

<p:messages showDetail="false" showSummary="true" autoUpdate="true"  />

<p:dataTable id="table_tarefas" value="#{tarefaBean.tarefas}" var="tarefa" paginator="true" paginatorPosition="top" rows="25">
<p:column headerText="id" style="width:30px; text-align: center">
<h:outputText value="#{tarefa.id}" />
</p:column>

<p:column headerText="Titulo" style="text-align: center">
<h:outputText value="#{tarefa.titulo}" />
</p:column>

<p:column headerText="Responsavel" style="text-align: center">
<h:outputText value="#{tarefa.responsavel.nome}" />
</p:column>

<p:column headerText="SubLider"  style="text-align: center">
<h:outputText value="#{tarefa.subLider.nome}" />
</p:column>

<p:column headerText="Esatdo"  style="text-align: center" sortBy="#{tarefa.estado}">
<h:outputText value="#{tarefa.estado}" />
</p:column>

<p:column headerText="Origen"  style="text-align: center" >
<h:outputText value="#{tarefa.origen}" />
</p:column>

<p:column headerText="Proyeto"  style="text-align: center">
<h:outputText value="#{tarefa.proyeto}"/>
</p:column>


</p:dataTable>


</h:form>

</ui:define>
</ui:composition>