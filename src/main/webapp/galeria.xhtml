<!DOCTYPE html>
<ui:composition template="/WEB-INF/template/template_aernnova.xhtml"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://xmlns.jcp.org/jsf/core"
xmlns:h="http://xmlns.jcp.org/jsf/html"
xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
xmlns:p="http://primefaces.org/ui">

<f:metadata>
<f:viewParam name="id" value="#{tarefaBean.tarefaSelecionada}" />
</f:metadata>


<ui:define name="corpo">
<h:form id="frm_galeria">
<p:growl id="growltap"  showDetail="false" showSummary="true" autoUpdate="true" />
<div align="center">
<p:fieldset legend="Tarefa: #{tarefaBean.tarefaSelecionada.titulo}" style="width:780px" >

<p:galleria  value="#{tarefaBean.images}" var="image" panelWidth="774" panelHeight="400" autoPlay="false"  >
   				 <p:graphicImage value="/temp/#{image}" width="774" height="400" />   				  
   				
</p:galleria>

<p:dialog widgetVar="dlgDeleteFoto" resizable="false" modal="true" showEffect="side" hideEffect="explode">
<p:dataTable value="#{tarefaBean.images}" var="image" style="width:350px" >

<p:column>
<p:graphicImage value="/temp/#{image}" width="75" height="50" /> 
</p:column>

<p:column style="width: 30px">
<p:commandButton rendered="#{tarefaBean.canDeleteFoto(image)}"  icon="ui-icon-trash" action="#{tarefaBean.deleteFoto(image)}" update="frm_galeria" >
<p:confirm header="Eliminar Foto" message="Tem Certeza?" icon="ui-icon-alert" />
</p:commandButton>
<p:confirmDialog global="true" showEffect="fade" hideEffect="fade" >
			        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
			        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
</p:confirmDialog>

</p:column>

</p:dataTable>
</p:dialog>

<p:button rendered="#{tarefaBean.tarefaSelecionada.estado eq 'INICIADA'}"  icon="ui-icon-arrowrefresh-1-e" outcome="/tarefas/minhasTarefas/minhastIniciadas" />
<p:button rendered="#{tarefaBean.tarefaSelecionada.estado eq 'FECHADA'}" icon="ui-icon-arrowrefresh-1-e" outcome="/tarefas/minhasTarefas/minhastFechadas" />
<p:commandButton rendered="#{tarefaBean.tarefaSelecionada.estado eq 'INICIADA'}"  icon="ui-icon-trash" oncomplete="PF('dlgDeleteFoto').show()" />
</p:fieldset>
</div>
</h:form>
</ui:define>
</ui:composition>